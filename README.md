# XML-creator

---
## Общая информация

Базовая станция – сложный аппаратно-программный комплекс по приёму и передаче радиосигналов,
способный работать со множеством мобильных устройств одновременно. Аппаратная часть состоит 
в том числе из антенны и одного или нескольких радиомодулей, связанных между собой физически.
Программная часть состоит из большого количества сервисов, работающих вместе на одном «железе»,
при этом каждый из них отвечает за конкретный функционал. Координирующим узлом в программной части
выступает система управления базовой станцией.

Важной частью системы управления базовой станции является информационная модель, 
которая представляет собой формальную UML-диаграмму с описанием иерархической структуры классов 
и их атрибутов. Данная модель разрабатывается в специализированных программах, которые предоставляют 
удобный интерфейс для одновременной совместной работы над моделями, хранение их в БД, разграничение доступа.
В процессе эволюции системы в модель регулярно вносятся изменения (появляются новые классы, изменяются атрибуты и т.д.).

Модель в виде рисунка понятна и привычна для человека, но для компьютерной обработки удобнее другой формат,
более приближенный к машинному, поэтому модель может быть переведена в XML-файл, однозначно соответствующий UML-диаграмме.

Полученный XML проверяется на непротиворечивость и отсутствие ошибок (при разработке всегда может сыграть
человеческий фактор) – этот процесс мы называем валидацией. Если ошибок нет, запускается генерация определённых 
частей исходного кода – артефактов – по сути, интерфейсов для программ всех компонент базовой станции (к ним 
относятся файлы конфигурации, YANG-файлы, исходники на C++ и Go, Proto-файлы и т.д.). Одновременный переход всех 
компонент на новую версию артефактов позволяет избежать ошибок несовместимости версий и является одной из первоочередных 
задач системы управления базовой станцией.
---

## Требования

Программа на Python на основе входных файлов 
(impulse_test_input.xml, config.json, patched_config.json) генерирует следующие виды выходных файлов (артефактов):
- Файл config.xml представляет собой пример внутренней конфигурации базовой станции, соответствующей модели.
- Файл meta.json содержит мета-информацию о классах и их атрибутах. Фронтенд использует данный файл для корректного 
отображения дерева объектов в интерфейсе пользователя (UI).
- Файл delta.json отражает разницу между файлами config.json и patched_config.json. Содержит поля:
  - additions — новые параметры, присутствующие в patched_config.json, но отсутствующие в config.json,
  - deletions — удалённые параметры, присутствующие в config.json, но отсутствующие в patched_config.json,
  - updates — параметры, значения которых были изменены.
- Файл res_patched_config.json представляет результат применения дельты (delta.json) к файлу config.json.

---
## Алгоритма решения

Алгоритм решения разбит на логические шаги, которые соответствуют требованиям задания. Вот краткое описание каждого этапа:

1. **Парсинг XML**:
   - Считываем `impulse_test_input.xml`, извлекаем классы и их связи.
   - Создаём словарь `classes`, где хранится вся информация о классах (атрибуты, дочерние классы).
   - Отдельно сохраняем мощности (`multiplicities`) для использования в `meta.json`.

2. **Генерация `config.xml`**:
   - Находим корневой класс (`BTS`) и рекурсивно строим XML-структуру.
   - Форматируем с отступами, сохраняя самозакрывающиеся теги для пустых элементов.

3. **Генерация `meta.json`**:
   - Для каждого класса формируем JSON-объект с мета-информацией.
   - Указываем атрибуты и дочерние классы как `parameters`.

4. **Генерация `delta.json`**:
   - Сравниваем `config.json` и `patched_config.json`.
   - Выделяем добавленные, удалённые и изменённые параметры.

5. **Генерация `res_patched_config.json`**:
   - Применяем дельту к `config.json`, чтобы получить обновлённую конфигурацию.